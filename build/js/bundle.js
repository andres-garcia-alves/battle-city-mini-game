webpackJsonp([0],{1076:function(e,t,a){"use strict";var s=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var a in t)t.hasOwnProperty(a)&&(e[a]=t[a])};return function(t,a){function s(){this.constructor=t}e(t,a),t.prototype=null===a?Object.create(a):(s.prototype=a.prototype,new s)}}();Object.defineProperty(t,"__esModule",{value:!0});var r=function(e){function t(){return e.call(this,{key:"GameOverScene"})||this}return s(t,e),t.prototype.init=function(e){},t.prototype.preload=function(){this.load.image("gameover-background","assets/images/backgrounds/gameover-background.png")},t.prototype.create=function(){var e=this;this.background=this.add.image(0,0,"gameover-background").setOrigin(0,0),this.cameras.main.setScroll(0,-720),this.cameras.main.pan(384,360,2e3,"Linear",!1),this.time.delayedCall(3e3,function(){e.scene.start("WelcomeScene")})},t.prototype.update=function(e){},t}(Phaser.Scene);t.GameOverScene=r},1077:function(e,t,a){"use strict";var s=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var a in t)t.hasOwnProperty(a)&&(e[a]=t[a])};return function(t,a){function s(){this.constructor=t}e(t,a),t.prototype=null===a?Object.create(a):(s.prototype=a.prototype,new s)}}();Object.defineProperty(t,"__esModule",{value:!0});var r=function(e){function t(){return e.call(this,{key:"ScoresScene"})||this}return s(t,e),t.prototype.init=function(e){this.stageNumber=e.stageNumber},t.prototype.preload=function(){this.load.image("scores-background","assets/images/backgrounds/scores-background.png")},t.prototype.create=function(){var e=this;this.background=this.add.image(0,0,"scores-background").setOrigin(0,0),this.time.delayedCall(2e3,function(){e.scene.start("StageNumberScene",{stageNumber:e.stageNumber+1})})},t.prototype.update=function(e){},t}(Phaser.Scene);t.ScoresScene=r},1078:function(e,t,a){"use strict";var s=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var a in t)t.hasOwnProperty(a)&&(e[a]=t[a])};return function(t,a){function s(){this.constructor=t}e(t,a),t.prototype=null===a?Object.create(a):(s.prototype=a.prototype,new s)}}();Object.defineProperty(t,"__esModule",{value:!0});var r=a(1079),i=a(1080),n=a(1081),o=a(1082),m=a(1083),l=a(1084),c=a(1085),u=a(1086),g=function(e){function t(){return e.call(this,{key:"StageScene"})||this}return s(t,e),t.prototype.init=function(e){this.stageNumber=e.stageNumber,void 0===this.stageNumber&&(this.stageNumber=1),this.stageName=u.Utils.buildStageName(this.stageNumber),this.gameOver=!1,this.stageCompleted=!1,this.cursors=this.input.keyboard.createCursorKeys()},t.prototype.preload=function(){this.load.image("game-background","assets/images/backgrounds/game-background.png"),this.load.tilemapTiledJSON("game-stage"+this.stageName+"-tilemap","assets/stages/stage"+this.stageName+"-tilemap.json"),this.load.json("game-stage"+this.stageName+"-script","assets/stages/stage"+this.stageName+"-script.json"),this.load.image("game-tileset","assets/images/tiles/game-tileset.png"),this.load.spritesheet("game-bullet","assets/images/sprites/bullet.png",{frameWidth:12,frameHeight:12}),this.load.spritesheet("game-fortress","assets/images/sprites/fortress.png",{frameWidth:48,frameHeight:48}),this.load.spritesheet("game-player-one","assets/images/sprites/player-one.png",{frameWidth:48,frameHeight:48}),this.load.spritesheet("game-player-two","assets/images/sprites/player-two.png",{frameWidth:48,frameHeight:48}),this.load.spritesheet("game-regular-enemy","assets/images/sprites/regular-enemy.png",{frameWidth:48,frameHeight:48}),this.load.spritesheet("game-speedy-enemy","assets/images/sprites/speedy-enemy.png",{frameWidth:48,frameHeight:48}),this.load.image("game-enemies-count","assets/images/sprites/logo-enemies.png"),this.load.image("game-game-over","assets/images/sprites/logo-game-over.png"),this.load.image("game-level-count","assets/images/sprites/logo-flag.png"),this.load.image("game-lives-count","assets/images/sprites/logo-lives.png")},t.prototype.create=function(){this.background=this.add.image(0,0,"game-background"),this.background.setOrigin(0,0);var e=this.make.tilemap({key:"game-stage"+this.stageName+"-tilemap"}),t=e.addTilesetImage("game-tileset","game-tileset");this.gameLayer=e.createDynamicLayer("game-layer",t,0,0),this.gameLayer.setCollisionBetween(1,9999,!0,!0),e.createStaticLayer("above-layer",t,0,0).setDepth(2),this.bulletsEnemies=this.physics.add.group(),this.bulletsPlayer1=this.physics.add.group(),this.bulletsPlayer2=this.physics.add.group(),r.BulletAnimations.create(this),this.enemies=this.physics.add.group(),m.RegularEnemyAnimations.create(this),l.SpeedyEnemyAnimations.create(this),this.fortress=this.physics.add.staticSprite(360,648,"game-fortress"),this.fortress.setBounce(0,0),this.fortress.setCollideWorldBounds(!0),this.fortress.setImmovable(!0),i.FortressAnimations.create(this),this.player1=this.physics.add.sprite(264,648,"game-player-one"),this.player1.setBounce(0,0),this.player1.setCollideWorldBounds(!0),this.player1.setData("direction","up"),this.player1.setData("lives",3),this.player1.setData("name","player-one"),n.PlayerOneAnimations.create(this),this.player2=this.physics.add.sprite(456,648,"game-player-two"),this.player2.setBounce(0,0),this.player2.setCollideWorldBounds(!0),this.player2.setData("direction","up"),this.player2.setData("lives",3),this.player1.setData("name","player-two"),o.PlayerTwoAnimations.create(this),this.logoGameOver=this.add.image(360,744,"game-game-over").setDepth(3),this.logoLevelCount=this.add.image(720,576,"game-level-count"),this.logoLivesCount=this.add.image(708,444,"game-lives-count"),this.logoEnemiesCount=this.add.group();for(var a=0;a<10;a++)for(var s=0;s<2;s++)this.logoEnemiesCount.create(708+24*s,84+24*a,"game-enemies-count");this.physics.add.collider(this.player1,this.player2),this.physics.add.collider(this.player1,this.gameLayer),this.physics.add.collider(this.player2,this.gameLayer),this.physics.add.collider(this.player1,this.fortress),this.physics.add.collider(this.player2,this.fortress),this.physics.add.collider(this.player1,this.enemies),this.physics.add.collider(this.player2,this.enemies),this.physics.add.collider(this.bulletsPlayer1,this.player2,this.collitionDestroyBullet,null,this),this.physics.add.collider(this.bulletsPlayer2,this.player1),this.physics.add.collider(this.bulletsEnemies,this.player1,this.collitionDestroyPlayer,null,this),this.physics.add.collider(this.bulletsEnemies,this.player2),this.physics.add.collider(this.bulletsPlayer1,this.gameLayer,this.collitionDestroyLayer,null,this),this.physics.add.collider(this.bulletsPlayer2,this.gameLayer),this.physics.add.collider(this.bulletsPlayer1,this.fortress,this.collitionDestroyFortress,null,this),this.physics.add.collider(this.bulletsPlayer2,this.fortress),this.physics.add.collider(this.bulletsPlayer1,this.enemies,this.collitionDestroyEnemy,null,this),this.physics.add.collider(this.bulletsPlayer2,this.enemies),this.physics.add.collider(this.bulletsPlayer1,this.bulletsEnemies),this.physics.add.collider(this.bulletsPlayer2,this.bulletsEnemies);var u=this.cache.json.get("game-stage"+this.stageName+"-script");c.ScriptManager.parse(this,this.enemies,u,this.enemyCreated,this.logoEnemiesCount)},t.prototype.update=function(e){void 0!==this.player1.body&&(this.player1.setVelocity(0,0),this.cursors.up.isDown?(this.player1.anims.play("game-anim-player01-up",!0),this.player1.setVelocity(0,-160),this.player1.setData("direction","up")):this.cursors.right.isDown?(this.player1.anims.play("game-anim-player01-right",!0),this.player1.setVelocity(160,0),this.player1.setData("direction","right")):this.cursors.down.isDown?(this.player1.anims.play("game-anim-player01-down",!0),this.player1.setVelocity(0,160),this.player1.setData("direction","down")):this.cursors.left.isDown&&(this.player1.anims.play("game-anim-player01-left",!0),this.player1.setVelocity(-160,0),this.player1.setData("direction","left")),this.cursors.space.isDown&&(this.cursors.space.reset(),this.createBulletPlayer1()),this.gameOver&&this.stageFailed(),this.stageCompleted&&this.stageSucceeded(),this.cursors.shift.isDown&&this.stageNumber<3&&(this.cursors.shift.reset(),this.stageSucceeded()),this.cursors.shift.isDown&&3===this.stageNumber&&(this.cursors.space.reset(),this.stageFailed()))},t.prototype.enemyCreated=function(e){e.remove(e.getLast(!0),!0,!0)},t.prototype.createBulletPlayer1=function(){if(!(this.bulletsPlayer1.getLength()>0)){var e=this.player1.getData("direction"),t="",a=0,s=0,r=0,i=0;"up"===e&&(t="game-anim-bullet-up",a=this.player1.x,s=this.player1.y-23,r=0,i=-360),"right"===e&&(t="game-anim-bullet-right",a=this.player1.x+23,s=this.player1.y,r=360,i=0),"down"===e&&(t="game-anim-bullet-down",a=this.player1.x,s=this.player1.y+23,r=0,i=360),"left"===e&&(t="game-anim-bullet-left",a=this.player1.x-23,s=this.player1.y,r=-360,i=0);var n=this.bulletsPlayer1.create(a,s,"game-bullet");n.setBounce(0,0),n.setCollideWorldBounds(!0),n.setVelocity(r,i),n.setData("name","bullet"),n.anims.play(t,!0)}},t.prototype.collitionDestroyBullet=function(e,t){this.bulletsPlayer1.remove(t,!0,!0)},t.prototype.collitionDestroyEnemy=function(e,t){this.bulletsPlayer1.remove(e,!0,!0),this.enemies.remove(t,!0,!0),0===this.logoEnemiesCount.getLength()&&0===this.enemies.getLength()&&(this.stageCompleted=!0)},t.prototype.collitionDestroyFortress=function(e,t){this.fortress.anims.play("game-anim-fortress-destroyed"),this.bulletsPlayer1.remove(t,!0,!0),this.gameOver=!0},t.prototype.collitionDestroyLayer=function(e,t){var a=this.gameLayer.worldToTileXY(e.x,e.y),s=this.player1.getData("direction");"up"===s&&(this.gameLayer.removeTileAt(a.x+1,a.y-1),this.gameLayer.removeTileAt(a.x,a.y-1),this.gameLayer.removeTileAt(a.x-1,a.y-1),this.gameLayer.removeTileAt(a.x-2,a.y-1)),"right"===s&&(this.gameLayer.removeTileAt(a.x+1,a.y-2),this.gameLayer.removeTileAt(a.x+1,a.y-1),this.gameLayer.removeTileAt(a.x+1,a.y),this.gameLayer.removeTileAt(a.x+1,a.y+1)),"down"===s&&(this.gameLayer.removeTileAt(a.x+1,a.y+1),this.gameLayer.removeTileAt(a.x,a.y+1),this.gameLayer.removeTileAt(a.x-1,a.y+1),this.gameLayer.removeTileAt(a.x-2,a.y+1)),"left"===s&&(this.gameLayer.removeTileAt(a.x-1,a.y-2),this.gameLayer.removeTileAt(a.x-1,a.y-1),this.gameLayer.removeTileAt(a.x-1,a.y),this.gameLayer.removeTileAt(a.x-1,a.y+1)),this.bulletsPlayer1.remove(e,!0,!0)},t.prototype.collitionDestroyPlayer=function(){},t.prototype.stageSucceeded=function(){var e=this;this.time.delayedCall(3e3,function(){e.scene.start("ScoresScene",{stageNumber:e.stageNumber})})},t.prototype.stageFailed=function(){var e=this;this.tweens.add({duration:2e3,ease:"Back",repeat:0,targets:this.logoGameOver,y:"342",yoyo:!1}),this.time.delayedCall(3e3,function(){e.scene.start("GameOverScene")})},t}(Phaser.Scene);t.StageScene=g},1079:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function e(){}return e.create=function(e){void 0===e.anims.get("game-anim-bullet-up")&&e.anims.create({frameRate:10,frames:e.anims.generateFrameNumbers("game-bullet",{start:0,end:0}),key:"game-anim-bullet-up",repeat:1}),void 0===e.anims.get("game-anim-bullet-right")&&e.anims.create({frameRate:10,frames:e.anims.generateFrameNumbers("game-bullet",{start:1,end:1}),key:"game-anim-bullet-right",repeat:1}),void 0===e.anims.get("game-anim-bullet-down")&&e.anims.create({frameRate:10,frames:e.anims.generateFrameNumbers("game-bullet",{start:2,end:2}),key:"game-anim-bullet-down",repeat:1}),void 0===e.anims.get("game-anim-bullet-left")&&e.anims.create({frameRate:10,frames:e.anims.generateFrameNumbers("game-bullet",{start:3,end:3}),key:"game-anim-bullet-left",repeat:1})},e}();t.BulletAnimations=s},1080:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function e(){}return e.create=function(e){void 0===e.anims.get("game-anim-fortress-destroyed")&&e.anims.create({frameRate:10,frames:e.anims.generateFrameNumbers("game-fortress",{start:1,end:1}),key:"game-anim-fortress-destroyed",repeat:1})},e}();t.FortressAnimations=s},1081:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function e(){}return e.create=function(e){void 0===e.anims.get("game-anim-player01-up")&&e.anims.create({frameRate:10,frames:e.anims.generateFrameNumbers("game-player-one",{start:0,end:1}),key:"game-anim-player01-up",repeat:1}),void 0===e.anims.get("game-anim-player01-right")&&e.anims.create({frameRate:10,frames:e.anims.generateFrameNumbers("game-player-one",{start:2,end:3}),key:"game-anim-player01-right",repeat:1}),void 0===e.anims.get("game-anim-player01-down")&&e.anims.create({frameRate:10,frames:e.anims.generateFrameNumbers("game-player-one",{start:4,end:5}),key:"game-anim-player01-down",repeat:1}),void 0===e.anims.get("game-anim-player01-left")&&e.anims.create({frameRate:10,frames:e.anims.generateFrameNumbers("game-player-one",{start:6,end:7}),key:"game-anim-player01-left",repeat:1})},e}();t.PlayerOneAnimations=s},1082:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function e(){}return e.create=function(e){void 0===e.anims.get("game-anim-player02-up")&&e.anims.create({frameRate:10,frames:e.anims.generateFrameNumbers("game-player-two",{start:0,end:1}),key:"game-anim-player02-up",repeat:1}),void 0===e.anims.get("game-anim-player02-right")&&e.anims.create({frameRate:10,frames:e.anims.generateFrameNumbers("game-player-two",{start:2,end:3}),key:"game-anim-player02-right",repeat:1}),void 0===e.anims.get("game-anim-player02-down")&&e.anims.create({frameRate:10,frames:e.anims.generateFrameNumbers("game-player-two",{start:4,end:5}),key:"game-anim-player02-down",repeat:1}),void 0===e.anims.get("game-anim-player02-left")&&e.anims.create({frameRate:10,frames:e.anims.generateFrameNumbers("game-player-two",{start:6,end:7}),key:"game-anim-player02-left",repeat:1})},e}();t.PlayerTwoAnimations=s},1083:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function e(){}return e.create=function(e){void 0===e.anims.get("game-anim-regular-enemy-up")&&e.anims.create({frameRate:10,frames:e.anims.generateFrameNumbers("game-regular-enemy",{start:0,end:1}),key:"game-anim-regular-enemy-up",repeat:1}),void 0===e.anims.get("game-anim-regular-enemy-right")&&e.anims.create({frameRate:10,frames:e.anims.generateFrameNumbers("game-regular-enemy",{start:2,end:3}),key:"game-anim-regular-enemy-right",repeat:1}),void 0===e.anims.get("game-anim-regular-enemy-down")&&e.anims.create({frameRate:10,frames:e.anims.generateFrameNumbers("game-regular-enemy",{start:4,end:5}),key:"game-anim-regular-enemy-down",repeat:1}),void 0===e.anims.get("game-anim-regular-enemy-left")&&e.anims.create({frameRate:10,frames:e.anims.generateFrameNumbers("game-regular-enemy",{start:6,end:7}),key:"game-anim-regular-enemy-left",repeat:1})},e}();t.RegularEnemyAnimations=s},1084:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function e(){}return e.create=function(e){void 0===e.anims.get("game-anim-speedy-enemy-up")&&e.anims.create({frameRate:10,frames:e.anims.generateFrameNumbers("game-speedy-enemy",{start:0,end:1}),key:"game-anim-speedy-enemy-up",repeat:1}),void 0===e.anims.get("game-anim-speedy-enemy-right")&&e.anims.create({frameRate:10,frames:e.anims.generateFrameNumbers("game-speedy-enemy",{start:2,end:3}),key:"game-anim-speedy-enemy-right",repeat:1}),void 0===e.anims.get("game-anim-speedy-enemy-down")&&e.anims.create({frameRate:10,frames:e.anims.generateFrameNumbers("game-speedy-enemy",{start:4,end:5}),key:"game-anim-speedy-enemy-down",repeat:1}),void 0===e.anims.get("game-anim-speedy-enemy-left")&&e.anims.create({frameRate:10,frames:e.anims.generateFrameNumbers("game-speedy-enemy",{start:6,end:7}),key:"game-anim-speedy-enemy-left",repeat:1})},e}();t.SpeedyEnemyAnimations=s},1085:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function e(){}return e.parse=function(e,t,a,s,r){var i=this,n=0,o=0,m=0,l="";a.enemies.forEach(function(a){e.time.delayedCall(a.delay,function(){n++,o=i.getPosX(a.spawn),m=72,l=i.getSpriteKey(a.type);var e=t.create(o,m,l);e.setBounce(0,0),e.setCollideWorldBounds(!0),e.setImmovable(!0),e.setData("name","enemy-"+n),void 0!==s&&s(r)})})},e.getPosX=function(e){return e=e.toLowerCase(),"left"===e?72:"center"===e?360:"right"===e?648:void 0},e.getSpriteKey=function(e){return e=e.toLowerCase(),"regular"===e?"game-regular-enemy":"speedy"===e?"game-speedy-enemy":"shooter"===e?"game-shooter-enemy":"heavy"===e?"game-heavy-enemy":void 0},e}();t.ScriptManager=s},1086:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function e(){}return e.buildStageName=function(e){return e<10?"0"+e.toString():e.toString()},e}();t.Utils=s},1087:function(e,t,a){"use strict";var s=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var a in t)t.hasOwnProperty(a)&&(e[a]=t[a])};return function(t,a){function s(){this.constructor=t}e(t,a),t.prototype=null===a?Object.create(a):(s.prototype=a.prototype,new s)}}();Object.defineProperty(t,"__esModule",{value:!0});var r=function(e){function t(){return e.call(this,{key:"StageNumberScene"})||this}return s(t,e),t.prototype.init=function(e){this.stageNumber=e.stageNumber},t.prototype.preload=function(){this.load.image("load-background","assets/images/backgrounds/load-background.png")},t.prototype.create=function(){var e=this;this.background=this.add.image(0,0,"load-background").setOrigin(0,0),this.info=this.add.text(330,340,"STAGE  "+this.stageNumber,{font:"24px Courier New",fill:"#000000"}),this.cameras.main.setScroll(0,-720),this.cameras.main.pan(384,360,500,"Linear",!1),this.time.delayedCall(2e3,function(){e.scene.start("StageScene",{stageNumber:e.stageNumber})})},t.prototype.update=function(e){},t.prototype.stageCompleted=function(){this.scene.start("StageScene",{stageNumber:this.stageNumber})},t}(Phaser.Scene);t.StageNumberScene=r},1088:function(e,t,a){"use strict";var s=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var a in t)t.hasOwnProperty(a)&&(e[a]=t[a])};return function(t,a){function s(){this.constructor=t}e(t,a),t.prototype=null===a?Object.create(a):(s.prototype=a.prototype,new s)}}();Object.defineProperty(t,"__esModule",{value:!0});var r=function(e){function t(){var t=e.call(this,{key:"WelcomeScene"})||this;return t.bgSwitch=!0,t}return s(t,e),t.prototype.init=function(e){this.stageNumber=0},t.prototype.preload=function(){this.load.image("welcome-background-01","assets/images/backgrounds/welcome-background-01.png"),this.load.image("welcome-background-02","assets/images/backgrounds/welcome-background-02.png")},t.prototype.create=function(){this.background=this.add.image(0,0,"welcome-background-01").setOrigin(0,0),this.cursors=this.input.keyboard.createCursorKeys(),this.cameras.main.setScroll(0,-720),this.cameras.main.pan(384,360,2e3,"Linear",!1),this.time.addEvent({callback:this.blinkBackground,callbackScope:this,delay:500,loop:!0})},t.prototype.update=function(e){this.cursors.space.isDown&&(this.cursors.space.reset(),this.scene.start("StageNumberScene",{stageNumber:this.stageNumber+1}))},t.prototype.blinkBackground=function(){var e=this.bgSwitch?"welcome-background-01":"welcome-background-02";this.background=this.add.image(0,0,e).setOrigin(0,0),this.bgSwitch=!this.bgSwitch},t}(Phaser.Scene);t.WelcomeScene=r},434:function(e,t,a){e.exports=a(435)},435:function(e,t,a){"use strict";var s=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var a in t)t.hasOwnProperty(a)&&(e[a]=t[a])};return function(t,a){function s(){this.constructor=t}e(t,a),t.prototype=null===a?Object.create(a):(s.prototype=a.prototype,new s)}}();Object.defineProperty(t,"__esModule",{value:!0}),a(210);var r=a(1076),i=a(1077),n=a(1078),o=a(1087),m=a(1088),l={backgroundColor:"000000",height:720,parent:"game",physics:{arcade:{debug:!1,gravity:{x:0,y:0}},default:"arcade"},render:{pixelArt:!0,antialias:!1},scene:[m.WelcomeScene,r.GameOverScene,i.ScoresScene,n.StageScene,o.StageNumberScene],title:"Mini Battle City",type:Phaser.AUTO,width:768},c=function(e){function t(t){return e.call(this,t)||this}return s(t,e),t}(Phaser.Game);t.BattleCityGame=c,window.onload=function(){new c(l)}}},[434]);